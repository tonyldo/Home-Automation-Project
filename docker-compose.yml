  version: '3'

  services:
    mosquitto:
      image: eclipse-mosquitto
      environment:
        - MOSQUITTO_USERNAME=${MOSQUITTO_USERNAME}
        - MOSQUITTO_PASSWORD=${MOSQUITTO_PASSWORD}
      container_name: mosquitto
      ports:
        - 1883:1883
        - 9001:9001
      volumes:
        - ~/.mosquitto/config/:/mosquitto/config/
        - ~/.mosquitto/data/:/mosquitto/data/
        - ~/.mosquitto/log/:/mosquitto/log/
        - ~/.mosquitto/pwd/:/mosquitto/pwd/
      restart: unless-stopped
      entrypoint: docker-entrypoint.sh
      command: ["/usr/sbin/mosquitto", "-c", "/mosquitto/config/mosquitto.conf"]
